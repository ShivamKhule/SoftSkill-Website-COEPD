<header class="bg-white shadow-md sticky top-0 z-[1001]">
    <div class="container mx-auto px-4 py-4">
        <div class="flex justify-between items-center">
            <a href="./index.php" id="home-link">
                <div class="flex items-center">
                    <h1 class="text-2xl font-bold text-blue-600">SoftSkills Academy</h1>
                </div>
                <!-- <img src="/learn/assets/images/logo.png" alt="Academy Logo" class="w-10 h-10 ml-2"> -->
            </a>

            <nav class="hidden lg:block">
                <ul class="flex flex-wrap space-x-2">

                    <!-- Hover underline + smooth color -->
                    <li>
                        <a href="./index.php" class="text-gray-700 font-medium relative px-3 py-1 rounded-md
          transition-all duration-300
          hover:text-blue-600 hover:bg-blue-50
          
          after:absolute after:left-0 after:bottom-0 after:h-0.5 after:w-0
          after:bg-blue-600 after:rounded-full
          after:transition-all after:duration-300
          hover:after:w-full" id="desktop-home-link">
                            Home
                        </a>
                    </li>

                    <li>
                        <!-- <a href="/learn/pages/about.php" class="text-gray-700 font-medium relative px-3 py-1 rounded-md -->
                        <a href="./pages/about.php"  id="desktop-about-link" class="text-gray-700 font-medium relative px-3 py-1 rounded-md
          transition-all duration-300
          hover:text-blue-600 hover:bg-blue-50
          
          after:absolute after:left-0 after:bottom-0 after:h-0.5 after:w-0
          after:bg-blue-600 after:rounded-full
          after:transition-all after:duration-300
          hover:after:w-full">
                            About Us
                        </a>
                    </li>

                    <!-- Dropdown -->
                    <li class="group relative">
                        <!-- <a href="/learn/pages/services.php" class="text-gray-700 font-medium relative px-3 py-1 rounded-md -->
                        <a href="#" class="text-gray-700 font-medium relative px-3 py-1 rounded-md
          transition-all duration-300
          hover:text-blue-600 hover:bg-blue-50
          
          after:absolute after:left-0 after:bottom-0 after:h-0.5 after:w-0
          after:bg-blue-600 after:rounded-full
          after:transition-all after:duration-300
          hover:after:w-full">
                            Services
                            <i class="fas fa-chevron-down ml-1 text-xs transform transition-transform duration-300 group-hover:rotate-180"></i>
                        </a>

                        <!-- Dropdown menu -->
                        <div class="absolute left-0 mt-3 w-48 bg-white shadow-xl rounded-lg 
                        opacity-0 invisible translate-y-2 
                        group-hover:opacity-100 group-hover:visible group-hover:translate-y-0 
                        transition-all duration-300 ease-in-out z-50">

                            <!-- <a href="/learn/pages/corporate.php" class="block px-4 py-2 text-gray-700 hover:bg-blue-50 hover:text-blue-600  -->
                            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-blue-50 hover:text-blue-600 
                          transition duration-200 transform hover:translate-x-1">
                                Corporate Training
                            </a>

                            <!-- <a href="/learn/pages/courses/" class="block px-4 py-2 text-gray-700 hover:bg-blue-50 hover:text-blue-600  -->
                            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-blue-50 hover:text-blue-600 
                          transition duration-200 transform hover:translate-x-1">
                                Individual Courses
                            </a>
                        </div>
                    </li>

                    <li>
                        <!-- <a href="/learn/pages/schedule.php" class="text-gray-700 font-medium relative px-3 py-1 rounded-md -->
                        <a href="#" class="text-gray-700 font-medium relative px-3 py-1 rounded-md
          transition-all duration-300
          hover:text-blue-600 hover:bg-blue-50
          
          after:absolute after:left-0 after:bottom-0 after:h-0.5 after:w-0
          after:bg-blue-600 after:rounded-full
          after:transition-all after:duration-300
          hover:after:w-full">
                            Batches
                        </a>
                    </li>

                    <li>
                        <!-- <a href="/learn/pages/blog/" class="text-gray-700 font-medium relative px-3 py-1 rounded-md -->
                        <a href="#" class="text-gray-700 font-medium relative px-3 py-1 rounded-md
          transition-all duration-300
          hover:text-blue-600 hover:bg-blue-50
          
          after:absolute after:left-0 after:bottom-0 after:h-0.5 after:w-0
          after:bg-blue-600 after:rounded-full
          after:transition-all after:duration-300
          hover:after:w-full">
                            Resources
                        </a>
                    </li>

                    <!-- FAQ Dropdown -->
                    <li class="group relative">
                        <!-- <a href="/learn/pages/faq.php" class="text-gray-700 font-medium relative px-3 py-1 rounded-md -->
                        <a href="#" class="text-gray-700 font-medium relative px-3 py-1 rounded-md
          transition-all duration-300
          hover:text-blue-600 hover:bg-blue-50
          
          after:absolute after:left-0 after:bottom-0 after:h-0.5 after:w-0
          after:bg-blue-600 after:rounded-full
          after:transition-all after:duration-300
          hover:after:w-full">
                            FAQ
                            <i class="fas fa-chevron-down ml-1 text-xs transform transition-transform duration-300 group-hover:rotate-180"></i>
                        </a>

                        <!-- Dropdown menu -->
                        <div class="absolute left-0 mt-3 w-48 bg-white shadow-xl rounded-lg 
                        opacity-0 invisible translate-y-2 
                        group-hover:opacity-100 group-hover:visible group-hover:translate-y-0 
                        transition-all duration-300 ease-in-out z-50">

                            <!-- <a href="/learn/pages/faq.php" class="block px-4 py-2 text-gray-700 hover:bg-blue-50 hover:text-blue-600  -->
                            <a href="@" class="block px-4 py-2 text-gray-700 hover:bg-blue-50 hover:text-blue-600 
                          transition duration-200 transform hover:translate-x-1">
                                General FAQ
                            </a>

                            <!-- <a href="/learn/pages/faq.php#course-faq" class="block px-4 py-2 text-gray-700 hover:bg-blue-50 hover:text-blue-600  -->
                            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-blue-50 hover:text-blue-600 
                          transition duration-200 transform hover:translate-x-1">
                                Course FAQ
                            </a>

                            <!-- <a href="/learn/pages/faq.php#payment-faq" class="block px-4 py-2 text-gray-700 hover:bg-blue-50 hover:text-blue-600  -->
                            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-blue-50 hover:text-blue-600 
                          transition duration-200 transform hover:translate-x-1">
                                Payment FAQ
                            </a>
                        </div>
                    </li>

                    <li>
                        <!-- <a href="/learn/pages/stories.php" class="text-gray-700 font-medium relative px-3 py-1 rounded-md -->
                        <a href="#" class="text-gray-700 font-medium relative px-3 py-1 rounded-md
          transition-all duration-300
          hover:text-blue-600 hover:bg-blue-50
          
          after:absolute after:left-0 after:bottom-0 after:h-0.5 after:w-0
          after:bg-blue-600 after:rounded-full
          after:transition-all after:duration-300
          hover:after:w-full">
                            Success Stories
                        </a>
                    </li>

                    <li>
                        <!-- <a href="/learn/pages/contact.php" class="text-gray-700 font-medium relative px-3 py-1 rounded-md -->
                        <a href="./pages/contact.php" class="text-gray-700 font-medium relative px-3 py-1 rounded-md
          transition-all duration-300
          hover:text-blue-600 hover:bg-blue-50
          
          after:absolute after:left-0 after:bottom-0 after:h-0.5 after:w-0
          after:bg-blue-600 after:rounded-full
          after:transition-all after:duration-300
          hover:after:w-full" id="desktop-contact-link">
                            Contact
                        </a>
                    </li>

                </ul>
            </nav>

            <!-- Mobile menu button -->
            <div class="flex items-center space-x-2">
                <!-- <a href="/learn/pages/downloads/" class="hidden lg:flex items-center text-gray-700 font-medium relative px-3 py-1 rounded-md -->
                <a href="#" class="hidden lg:flex items-center text-gray-700 font-medium relative px-3 py-1 rounded-md
          transition-all duration-300

          hover:text-blue-600 hover:bg-blue-50

          after:absolute after:left-0 after:bottom-0 after:h-0.5 after:w-0
          after:bg-blue-600 after:rounded-full
          after:transition-all after:duration-300
          hover:after:w-full">
                    <i class="fas fa-download mr-1"></i>
                    Free Resources
                </a>

                <button
                    class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition duration-300 shadow-md hover:shadow-lg hidden lg:block">
                    Enroll Now
                </button>
                <button id="mobile-menu-button" class="lg:hidden text-gray-700 z-[1002] relative w-10 h-10 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors duration-300">
                    <div class="w-6 h-6 flex flex-col justify-center items-center">
                        <span class="block w-5 h-0.5 bg-gray-700 rounded-full transition-all duration-300 transform origin-center"></span>
                        <span class="block w-5 h-0.5 bg-gray-700 rounded-full transition-all duration-300 transform origin-center mt-1"></span>
                    </div>
                </button>
            </div>
        </div>

        <!-- Mobile menu -->
        <div id="mobile-menu" class="lg:hidden fixed top-16 left-0 right-0 bg-white shadow-lg z-50 opacity-0 invisible transition-all duration-300 ease-in-out transform translate-y-[-10px]">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-white shadow-lg rounded-lg mx-4 mt-2">
                <a href="/" id="mobile-home-link"
                    class="text-gray-700 hover:bg-blue-50 hover:text-blue-600 block px-3 py-2 rounded-md text-base font-medium transition-all duration-200 transform hover:translate-x-1">Home</a>
                <!-- <a href="/learn/pages/about.php" -->
                <a href="/pages/about.php" id="mobile-about-link"
                    class="text-gray-700 hover:bg-blue-50 hover:text-blue-600 block px-3 py-2 rounded-md text-base font-medium transition-all duration-200 transform hover:translate-x-1">About
                    Us</a>

                <!-- Services section with sub-items -->
                <!-- <a href="/learn/pages/services.php" -->
                <div class="flex justify-between items-center">
                    <a href="#"
                        class="text-gray-700 hover:bg-blue-50 hover:text-blue-600 block px-3 py-2 rounded-md text-base font-medium flex-grow transition-all duration-200 transform hover:translate-x-1">Services</a>
                    <button id="services-toggle" class="text-gray-700 px-3 py-2 transition-transform duration-300">
                        <i class="fas fa-chevron-down text-sm transform transition-transform duration-300"></i>
                    </button>
                </div>
                <div id="services-submenu" class="pl-4 space-y-1 hidden opacity-0 transition-all duration-300 ease-in-out transform translate-y-[-5px]">
                    <!-- <a href="/learn/pages/corporate.php" -->
                    <a href="#"
                        class="text-gray-700 hover:bg-blue-50 hover:text-blue-600 block px-3 py-2 rounded-md text-base font-medium transition-all duration-200 transform hover:translate-x-1">Corporate
                        Training</a>
                    <!-- <a href="/learn/pages/courses/" -->
                    <a href="#"
                        class="text-gray-700 hover:bg-blue-50 hover:text-blue-600 block px-3 py-2 rounded-md text-base font-medium transition-all duration-200 transform hover:translate-x-1">Individual
                        Courses</a>
                </div>

                <!-- <a href="/learn/pages/schedule.php" -->
                <a href="#"
                    class="text-gray-700 hover:bg-blue-50 hover:text-blue-600 block px-3 py-2 rounded-md text-base font-medium transition-all duration-200 transform hover:translate-x-1">Batches</a>
                <!-- <a href="/learn/pages/blog/" -->
                <a href="#"
                    class="text-gray-700 hover:bg-blue-50 hover:text-blue-600 block px-3 py-2 rounded-md text-base font-medium transition-all duration-200 transform hover:translate-x-1">Resources</a>
                
                <!-- FAQ section with sub-items -->
                <!-- <a href="/learn/pages/faq.php" -->
                <div class="flex justify-between items-center">
                    <a href="#"
                        class="text-gray-700 hover:bg-blue-50 hover:text-blue-600 block px-3 py-2 rounded-md text-base font-medium flex-grow transition-all duration-200 transform hover:translate-x-1">FAQ</a>
                    <button id="faq-toggle" class="text-gray-700 px-3 py-2 transition-transform duration-300">
                        <i class="fas fa-chevron-down text-sm transform transition-transform duration-300"></i>
                    </button>
                </div>
                <div id="faq-submenu" class="pl-4 space-y-1 hidden opacity-0 transition-all duration-300 ease-in-out transform translate-y-[-5px]">
                    <!-- <a href="/learn/pages/faq.php" -->
                    <a href="#"
                        class="text-gray-700 hover:bg-blue-50 hover:text-blue-600 block px-3 py-2 rounded-md text-base font-medium transition-all duration-200 transform hover:translate-x-1">General
                        FAQ</a>
                    <!-- <a href="/learn/pages/faq.php#course-faq" -->
                    <a href="#"
                        class="text-gray-700 hover:bg-blue-50 hover:text-blue-600 block px-3 py-2 rounded-md text-base font-medium transition-all duration-200 transform hover:translate-x-1">Course
                        FAQ</a>
                    <!-- <a href="/learn/pages/faq.php#payment-faq" -->
                    <a href="#"
                        class="text-gray-700 hover:bg-blue-50 hover:text-blue-600 block px-3 py-2 rounded-md text-base font-medium transition-all duration-200 transform hover:translate-x-1">Payment
                        FAQ</a>
                </div>
                
                <!-- <a href="/learn/pages/stories.php" -->
                <a href="#"
                    class="text-gray-700 hover:bg-blue-50 hover:text-blue-600 block px-3 py-2 rounded-md text-base font-medium transition-all duration-200 transform hover:translate-x-1">Success
                    Stories</a>
                <a href="/pages/contact.php" id="mobile-contact-link"
                    class="text-gray-700 hover:bg-blue-50 hover:text-blue-600 block px-3 py-2 rounded-md text-base font-medium transition-all duration-200 transform hover:translate-x-1">Contact</a>
                <!-- <a href="/learn/pages/downloads/" -->
                <a href="#"
                    class="text-gray-700 hover:bg-blue-50 hover:text-blue-600 block px-3 py-2 rounded-md text-base font-medium transition-all duration-200 transform hover:translate-x-1">Free
                    Resources</a>
                <a href="#"
                    class="bg-blue-600 hover:bg-blue-700 text-white block px-3 py-2 rounded-md text-base font-medium text-center mt-2 transition-all duration-300 transform hover:scale-[1.02]">Enroll
                    Now</a>
            </div>
        </div>
    </div>
    <script>
        // Mobile menu toggle - inline script to avoid conflicts
        document.addEventListener('DOMContentLoaded', function () {
            // Get mobile menu elements
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenuElement = document.getElementById('mobile-menu');
            const servicesToggle = document.getElementById('services-toggle');
            const servicesSubmenu = document.getElementById('services-submenu');
            const faqToggle = document.getElementById('faq-toggle');
            const faqSubmenu = document.getElementById('faq-submenu');
            
            // Get hamburger icon elements
            const hamburgerLines = mobileMenuButton ? mobileMenuButton.querySelectorAll('span') : [];
            
            // Close mobile menu on page load to ensure it's closed when navigating back
            if (mobileMenuElement) {
                mobileMenuElement.classList.add('hidden');
            }
            
            // Adjust navigation links based on current location to prevent double navigation issues
            const currentPage = window.location.pathname;
            
            // Get all navigation links
            const homeLinks = document.querySelectorAll('#home-link, #desktop-home-link, #mobile-home-link');
            const contactLinks = document.querySelectorAll('#desktop-contact-link, #mobile-contact-link');
            const aboutLinks = document.querySelectorAll('#desktop-about-link, #mobile-about-link');
            
            // Detect if we're on localhost with /learn subdirectory or on production
            const isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
            const basePath = isLocalhost ? '/learn' : '';
            
            // Set paths based on environment
            homeLinks.forEach(link => {
                link.href = basePath + '/index.php';
            });
            
            contactLinks.forEach(link => {
                link.href = basePath + '/pages/contact.php';
            });
            
            aboutLinks.forEach(link => {
                link.href = basePath + '/pages/about.php';
            });
            
            // Handle navigation link clicks to close menu before navigating
            const navigationLinks = document.querySelectorAll('#mobile-menu a:not([href="#"])');
            navigationLinks.forEach(link => {
                link.addEventListener('click', function() {
                    if (mobileMenuElement) {
                        // Animate menu closing
                        mobileMenuElement.classList.remove('opacity-100', 'visible', 'translate-y-0');
                        mobileMenuElement.classList.add('opacity-0', 'invisible', 'translate-y-[-10px]');
                        
                        // Reset hamburger icon
                        if (hamburgerLines.length > 0) {
                            hamburgerLines[0].classList.remove('rotate-45', 'translate-y-1.5');
                            hamburgerLines[1].classList.remove('hidden', '-rotate-45', '-translate-y-1');
                        }
                        
                        // Hide menu after animation completes
                        setTimeout(() => {
                            mobileMenuElement.classList.add('hidden');
                        }, 300);
                    }
                });
            });

            if (mobileMenuButton && mobileMenuElement) {
                // Handle both click and touch events for better mobile support
                const toggleMobileMenu = function (e) {
                    e.preventDefault(); // Prevent default touch behavior
                    e.stopPropagation();
                    
                    // Toggle menu visibility with animation
                    if (mobileMenuElement.classList.contains('hidden')) {
                        // Show menu with animation
                        mobileMenuElement.classList.remove('hidden', 'opacity-0', 'invisible', 'translate-y-[-10px]');
                        mobileMenuElement.classList.add('opacity-100', 'visible', 'translate-y-0');
                        
                        // Animate hamburger to cross
                        if (hamburgerLines.length > 0) {
                            hamburgerLines[0].classList.add('rotate-45', 'translate-y-1.5');
                            hamburgerLines[1].classList.add('hidden');
                            setTimeout(() => {
                                hamburgerLines[1].classList.remove('hidden');
                                hamburgerLines[1].classList.add('-rotate-45', '-translate-y-1');
                            }, 150);
                        }
                    } else {
                        // Hide menu with animation
                        mobileMenuElement.classList.remove('opacity-100', 'visible', 'translate-y-0');
                        mobileMenuElement.classList.add('opacity-0', 'invisible', 'translate-y-[-10px]');
                        
                        // Animate cross back to hamburger
                        if (hamburgerLines.length > 0) {
                            hamburgerLines[0].classList.remove('rotate-45', 'translate-y-1.5');
                            hamburgerLines[1].classList.remove('-rotate-45', '-translate-y-1');
                            setTimeout(() => {
                                hamburgerLines[1].classList.add('hidden');
                            }, 150);
                            setTimeout(() => {
                                hamburgerLines[1].classList.remove('hidden');
                            }, 300);
                        }
                        
                        // Hide menu after animation completes
                        setTimeout(() => {
                            mobileMenuElement.classList.add('hidden');
                        }, 300);
                    }
                };
                
                mobileMenuButton.addEventListener('click', toggleMobileMenu);
                mobileMenuButton.addEventListener('touchstart', function(e) {
                    e.preventDefault(); // Prevent default touch behavior
                    toggleMobileMenu(e);
                });

                // Close mobile menu when clicking/touching outside
                const closeMobileMenu = function (event) {
                    // Check if the click/touch is outside the mobile menu and menu button
                    if (mobileMenuElement && !mobileMenuElement.classList.contains('hidden')) {
                        if (!mobileMenuElement.contains(event.target) && mobileMenuButton !== event.target && !mobileMenuButton.contains(event.target)) {
                            // Hide menu with animation
                            mobileMenuElement.classList.remove('opacity-100', 'visible', 'translate-y-0');
                            mobileMenuElement.classList.add('opacity-0', 'invisible', 'translate-y-[-10px]');
                            
                            // Animate cross back to hamburger
                            if (hamburgerLines.length > 0) {
                                hamburgerLines[0].classList.remove('rotate-45', 'translate-y-1.5');
                                hamburgerLines[1].classList.remove('-rotate-45', '-translate-y-1');
                                setTimeout(() => {
                                    hamburgerLines[1].classList.add('hidden');
                                }, 150);
                                setTimeout(() => {
                                    hamburgerLines[1].classList.remove('hidden');
                                }, 300);
                            }
                            
                            // Hide menu after animation completes
                            setTimeout(() => {
                                mobileMenuElement.classList.add('hidden');
                            }, 300);
                        }
                    }
                };
                
                document.addEventListener('click', closeMobileMenu);
                document.addEventListener('touchstart', function(e) {
                    // For touch events, we need to be more careful about preventing defaults
                    closeMobileMenu(e);
                }, { passive: true }); // Use passive listener for better performance
                
                // Close menu when browser back/forward buttons are used
                window.addEventListener('popstate', function() {
                    if (mobileMenuElement) {
                        // Hide menu with animation
                        mobileMenuElement.classList.remove('opacity-100', 'visible', 'translate-y-0');
                        mobileMenuElement.classList.add('opacity-0', 'invisible', 'translate-y-[-10px]');
                        
                        // Reset hamburger icon
                        if (hamburgerLines.length > 0) {
                            hamburgerLines[0].classList.remove('rotate-45', 'translate-y-1.5');
                            hamburgerLines[1].classList.remove('hidden', '-rotate-45', '-translate-y-1');
                        }
                        
                        // Hide menu after animation completes
                        setTimeout(() => {
                            mobileMenuElement.classList.add('hidden');
                        }, 300);
                    }
                });
            }

            // Toggle services submenu
            if (servicesToggle && servicesSubmenu) {
                const toggleServices = function(e) {
                    e.preventDefault(); // Prevent default behavior
                    e.stopPropagation(); // Stop event from bubbling up
                    
                    // Toggle submenu visibility with animation
                    if (servicesSubmenu.classList.contains('hidden')) {
                        servicesSubmenu.classList.remove('hidden', 'opacity-0', 'translate-y-[-5px]');
                        servicesSubmenu.classList.add('opacity-100', 'translate-y-0');
                        
                        // Rotate the chevron icon
                        const icon = servicesToggle.querySelector('i');
                        if (icon) {
                            icon.classList.add('rotate-180');
                        }
                    } else {
                        servicesSubmenu.classList.remove('opacity-100', 'translate-y-0');
                        servicesSubmenu.classList.add('opacity-0', 'translate-y-[-5px]');
                        
                        // Rotate the chevron icon back
                        const icon = servicesToggle.querySelector('i');
                        if (icon) {
                            icon.classList.remove('rotate-180');
                        }
                        
                        // Hide submenu after animation completes
                        setTimeout(() => {
                            servicesSubmenu.classList.add('hidden');
                        }, 300);
                    }
                };
                
                servicesToggle.addEventListener('click', toggleServices);
                servicesToggle.addEventListener('touchstart', function(e) {
                    e.preventDefault(); // Prevent default touch behavior
                    toggleServices(e);
                });
            }

            // Toggle FAQ submenu
            if (faqToggle && faqSubmenu) {
                const toggleFaq = function(e) {
                    e.preventDefault(); // Prevent default behavior
                    e.stopPropagation(); // Stop event from bubbling up
                    
                    // Toggle submenu visibility with animation
                    if (faqSubmenu.classList.contains('hidden')) {
                        faqSubmenu.classList.remove('hidden', 'opacity-0', 'translate-y-[-5px]');
                        faqSubmenu.classList.add('opacity-100', 'translate-y-0');
                        
                        // Rotate the chevron icon
                        const icon = faqToggle.querySelector('i');
                        if (icon) {
                            icon.classList.add('rotate-180');
                        }
                    } else {
                        faqSubmenu.classList.remove('opacity-100', 'translate-y-0');
                        faqSubmenu.classList.add('opacity-0', 'translate-y-[-5px]');
                        
                        // Rotate the chevron icon back
                        const icon = faqToggle.querySelector('i');
                        if (icon) {
                            icon.classList.remove('rotate-180');
                        }
                        
                        // Hide submenu after animation completes
                        setTimeout(() => {
                            faqSubmenu.classList.add('hidden');
                        }, 300);
                    }
                };
                
                faqToggle.addEventListener('click', toggleFaq);
                faqToggle.addEventListener('touchstart', function(e) {
                    e.preventDefault(); // Prevent default touch behavior
                    toggleFaq(e);
                });
            }
        });
        
        // Additional handler to close menu when page visibility changes (helps with mobile back navigation)
        document.addEventListener('visibilitychange', function() {
            if (document.visibilityState === 'visible') {
                const mobileMenuElement = document.getElementById('mobile-menu');
                const mobileMenuButton = document.getElementById('mobile-menu-button');
                const hamburgerLines = mobileMenuButton ? mobileMenuButton.querySelectorAll('span') : [];
                
                if (mobileMenuElement) {
                    // Hide menu with animation
                    mobileMenuElement.classList.remove('opacity-100', 'visible', 'translate-y-0');
                    mobileMenuElement.classList.add('opacity-0', 'invisible', 'translate-y-[-10px]');
                    
                    // Reset hamburger icon
                    if (hamburgerLines.length > 0) {
                        hamburgerLines[0].classList.remove('rotate-45', 'translate-y-1.5');
                        hamburgerLines[1].classList.remove('hidden', '-rotate-45', '-translate-y-1');
                    }
                    
                    // Hide menu after animation completes
                    setTimeout(() => {
                        mobileMenuElement.classList.add('hidden');
                    }, 300);
                }
            }
        });
    </script>
</header>